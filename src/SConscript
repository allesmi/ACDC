Object('custom-alloc.cc', CPPFLAGS=['-ggdb'], LIBS=['pthread'])

#ACDC Tools
Program('acdc', ['main.cc'])

optimal = Environment(CPPFLAGS=['-ggdb', '-DOPTIMAL_MODE'], LIBS=['pthread'])
glibc = Environment(CPPFLAGS=['-ggdb', '-DGLIBC_MODE'], LIBS=['pthread'])
hoard = Environment(CPPFLAGS=['-ggdb', '-DHOARD_MODE'], LIBS=['pthread', 'hoard'], LIBPATH=['../allocators'])

optimal.Object('locality-optimal', ['locality.cc'])
optimal.Object('false-sharing-optimal', ['false-sharing.c'])

glibc.Object('locality-glibc', ['locality.cc'])
glibc.Object('false-sharing-glibc', ['false-sharing.c'])
glibc.Object('heapcontention-glibc', ['heapcontention.c'])

hoard.Object('locality-hoard', ['locality.cc'])
hoard.Object('false-sharing-hoard', ['false-sharing.c'])
hoard.Object('heapcontention-hoard', ['heapcontention.c'])



optimal.Program('locality-optimal', ['locality-optimal.o', 'custom-alloc.o'])
optimal.Program('false-sharing-optimal', ['false-sharing-optimal.o', 'custom-alloc.o'])

glibc.Program('locality-glibc', ['locality-glibc.o'])
glibc.Program('false-sharing-glibc', ['false-sharing-glibc.o'])
glibc.Program('heapcontention-glibc', ['heapcontention-glibc.o'])

hoard.Program('locality-hoard', ['locality-hoard.o'])
hoard.Program('false-sharing-hoard', ['false-sharing-glibc.o'])
hoard.Program('heapcontention-hoard', ['heapcontention-hoard.o'])

# Test programs
Program('test-custom-alloc', ['test-custom-alloc.cc', 'custom-alloc.o'])
